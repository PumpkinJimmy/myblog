---
title: 分布式系统导论
date: 2021-09-10 15:01:28
tags:
- 分布式
- 专业课
categories:
- 分布式
---
# 分布式系统导论
## 分布式系统的挑战
- 系统涉及
  - 争取的接口设计和抽象
- 一致性
- 容错
- 部署
  - 集群
  - 多种场景
  - 光宇分布
- 实现
  - 安全
  - 性能
  - 负载均衡
## 排队论基础
### 马尔可夫过程
所谓*马尔可夫过程*是指一种简单但广泛存在的随机过程：**未来状态只与当前状态有关**，也即**无后效性**。

### M/M/1
M/M/1排队模型有如下假设：
1. 队列无限长度
2. 请求到达服从*泊松分布*，且分布的参数为$\lambda$，称为*到达率*
3. 系统服务服从*指数分布*，且分布的参数为$\mu$，称为*服务率*

排队系统稳态：当所有状态转入跟转出的概率相等时，系统稳定。

### 排队请求分布（重要）
令$p_k$表示系统中有$k$个正在排队的请求的概率，则：
$$
    p_k = (1-\frac{\lambda}{\mu})(\frac{\lambda}{\mu})^k
$$

## 分布式系统的设计目标
1. 使资源可访问
   
   （其实就是用户要能用）

2. 透明性
   
   指的是**系统的具体实现细节对用户不可见**，用户可以不关心实现细节。

3. 开放性
4. 可拓展性

## 透明性
### 为什么完全透明性不必要、难以实现
- 掩盖了通信成本
  
  若系统完全透明，则地理上的距离带来的通信成本

- 无法完全隐藏节点失效
  
  节点的失效是无法完全掩盖的。

- 牺牲性能
- 暴露拓扑结构

## 可拓展性
三方面典型的可拓展性：
- 规模可拓展性：用户和进程数量可以不断增加
- 地理可拓展性：可以迁移到不同的地理位置
- 管理可拓展性：系统可以拥有多个管理域，每个管理域具有自己独立的管理策略

通常分布式系统关注的可拓展性是**规模可拓展性**。主流的可拓展性解决方案是多个服务器独立并行运行。

### 规模可拓展性

在分布式系统中考虑可拓展性的动机：
- 处理器性能瓶颈
- 存储容量瓶颈
- 网络信息瓶颈

### 分布式系统拓展技术
#### 隐藏通信延迟

**尽量避免等待服务器。**

实现：
- 异步计算
- 客户端计算

#### 分散

再多个机器上划分数据和计算。

例如：
- Web
- 区块链

#### 复制

再多个机器上创建数据副本。

例如：
- Web站点镜像
- Web缓存服务器

**复制带来了一致性问题**


## 分布式系统度量（待完善）
- 系统利用率：

    基于排队论，有如下结论：

    $$
        U = \sum_{k>0} p_k = 1 - p_0 = \frac{\lambda}{\mu}
    $$

    其中$U$是系统利用率

- 平均请求数：

- 平均吞吐量：

- 响应时间：
  
    $$
        R = \frac{S}{1-U}
    $$

## 构建分布式系统的典型陷阱
- 网络是可靠的
- 网络带宽是无限的
- 网络是安全的
- 网络通信是零开销的
（待完善）


## 三种分布式系统
### 并行计算系统
### 集群计算系统

集群计算系统本质上是通过LAN连接的高端计算系统。

- 同构：相同的OS，几乎相同的硬件
- 单个管理节点

### 网格计算系统

- 异构
- 多个组织
- 容易拓展到广域网环境
- 为了允许合作，使用虚拟组织

（已经很少用了）

### 云计算

分层结构：
- 硬件
- 基础设施：硬件资源的虚拟化
- 运行平台：
- 应用

## 集成应用
### 服务

服务是一种软件形式，一种带有API的软件。

### 事务系统（待完善）

### 中间件

为系统集成提供通信的“承上启下”的软件。

它可以理解为软件系统的“消息总线”。

### 如何集成

1. 文件传输
   
   简单，但不灵活。

2. 共享数据库
   
   相对灵活，需要通用模式，可能导致瓶颈

3. RPC

   有效，但需要caller和callee同时在线

4. 消息传递
   
   允许caller和callee在时空上解耦

## 分布式嵌入系统
- 普适计算系统
- 移动计算系统
- 传感网络