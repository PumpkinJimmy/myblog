---
date: 2021-11-15 10:06:05.479152+08:00
title: DBMS底层：记录管理

---
# DBMS底层：记录管理
## 定长记录
定长记录的删除：
- 压缩：删除记录，后面的记录全部前移
- 交换：将最后面的记录交换到删除记录的位置
- 删除（空余）记录链表：在记录的最开始增加一个指针记录，作为链表头指针。链表记录着空余（被删除）记录的空间，方便重用。

## 变长记录
表示方案：
（待完善）

### Slotted Page Struture
根据磁盘读写的特点组织每一个页的数据结构：Slotted Page Struture。

Slotted Page Struture其实是微缩的文件系统存储组织，包含如下内容：
- record count
- **record location and size**
- **free space pointer**

## 记录文件组织
- 堆放（Pile,Heap）：没有规律地堆放记录到文件中
- 顺序文件：顺序存储记录
- 哈希文件
- 多表聚集文件（Multitable Clustering File）

### 顺序文件
组织方式：
- 顺序存储
- **单链表组织，每个记录末尾保存着下一个记录的位置。通常就是下一个记录**
- 依据搜索码排序

操作方式：
- 删除：删除记录链表
- 插入：
  - 依据搜索码定位
  - 若定位到空余空间，则直接放入
  - 否则，使用*overflow block*（溢出块）来存储插入的记录。溢出块是不在顺序记录的连续存储空间中的记录，通过后继指针来明确其位置
  - 需要定期重排数据库，整理溢出块到表中


### 多表聚集文件
其实就是**将来自不同表的记录存放到同一个文件中**。

使用这种记录的动机是**加快连接运算的速度**。这种结构使得牵涉到的表的联表的IO页面数减少。


## 元数据（待完善）

## 缓存管理

数据库性能提升的核心之一就是**最小化磁盘IO**

而减少读取的一个重要部分就是缓存，精确的说是**内存缓冲区管理**

### 缓存替换策略（待完善）
- LRU
- Pinned Block
- Toss-immediate
- MRU